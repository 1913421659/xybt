<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>发布需求</title>
	</head>
		{include file="public/css" /}
		<style>
		
		input.error {
	    border: 1px solid red;
	   }
	   form.cmxform label.error, label.error {
	     	color: red;
		    font-weight: normal;
		    font-size: 12px;
		    margin-left: 10px;
		    line-height: 30px;
	   }
	   #miaosu-error{
			float: right;
            position: relative;
            top: -78px;
		}
	</style>
	<body>
		<!--顶部说明-->
		{include file="public/header1" /}
		{include file="public/header2" /}
		<!--menu-->
		<div class="new_menu">
			<div class="wrap">
			    {include file="public/menu_r" /}
			</div>
		</div>
		<!--menu结束-->
		<div class="que_con que-a clearfix">
			<div class="wrap">
				<div class="que_menu_1">
					<p><img src="__RESOURCES__images/home.png"/>
					<a href="{:url('index/index')}">首页</a>
					<img src="__RESOURCES__images/right_2.png"/><a href="#">发布需求</a>
					
				</div>
				<div class="re_1">
					<form class="re_a" method="post" action="" id="form_demand" on-Submit="" enctype="multipart/form-data">
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">项目名称：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right">
						  			<div class="re_xia">
						  			    <input type="text" id="name"  class="form-control btn_a" name="name" placeholder="请输入项目名称">
						  			 </div>
						  		</div>
						  	</div>
						</div>
						<div class="row bottom_j">
							<div class="col-md-3">
								<div class="re_left">请选择营销地区：</div>
							</div>
							<div class="col-md-8">
								<div class="re_right">
									<div class="re_right ">
										<input type="hidden" name="area_list" id="area_list" value="" />
										<input type="text" class="city_box" name="city_box" id="city_box" placeholder="请选择营销地区" value="" data-value=""  onclick="appendCity(this,'duoxuan')" />			  			
									</div>					
								</div>
							</div>
						</div>
						<!--<div class="row bottom_j">-->
						 	<!--<div class="col-md-3">-->
						 		<!--<div class="re_left">请选择项目分类：</div>-->
						 	<!--</div>-->
						  	<!--<div class="col-md-8">-->
						  		<!--<div class="re_right">-->
									<!--<ul class="ui_a">-->
										<!--<li>-->
											<!--<select class="zuobian" name="" id="top_category_id">-->
												<!--<option value="0">请选择分类</option>-->
												<!--{foreach name="category_list" item="v"}-->
												<!--{if condition="$v.parent_id == 0"}-->
												<!--<option value="{$v.id}">{$v.category_name}</option>-->
												<!--{/if}-->
												<!--{/foreach}-->
									       <!--</select>-->
										<!--</li>-->
										<!--<li>-->
											<!--<select class="youbian" name="task_category_id" id="category_id">	-->
												<!--<option value="0" parent="0">请选择分类</option>-->
												<!--{foreach name="category_list" item="v"}-->
												<!--{if condition="$v.parent_id > 0"}-->
												<!--<option value="{$v.id}" parent="{$v.parent_id}" style="display:none;">{$v.category_name}</option>-->
												<!--{/if}-->
												<!--{/foreach}-->
											<!--</select>-->
										<!--</li>-->
									<!--</ul>-->
						  		<!--</div>-->
						  	<!--</div>-->
						<!--</div>-->
						
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">请选择营销方式：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right re_rrrr">
						  			<select class="js-example-basic-multiple" name="promotion_about[]" multiple="multiple" id="sec"> 
										{foreach name="promotion_list" item="v1"}
										<optgroup label="{$v1.promotion_name}">
											{foreach name="$v1['children_list']" item="v2"}
											<option value="{$v2.id}">{$v2.promotion_name}</option>
											{/foreach}
										</optgroup>
										{/foreach}
									</select>
						  		</div>
						  	</div>
						</div>
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">预算：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right">
						  			<div class="re_xia">
						  			    <input type="number" id="budget"  class="form-control btn_a" name="budget" placeholder="请输入预算金额">
						  			 </div>
						  		</div>
						  	</div>
						</div>
						<!--电话号码-->
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">电话号码：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right">
						  			<div class="re_xia">
						  			    <input type="number"  class="form-control btn_a" name="contact_phone" id="dianhua" placeholder="请输入电话号码">
						  			 </div>
						  		</div>
						  	</div>
						</div>
						<!--姓名-->
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">姓名：</div>
						 	</div>
							<div class="col-md-8">
								<div class="re_right">
									<div class="re_xia">
										<input type="text" class="form-control btn_a" name="contact_name" id="" placeholder="请输入姓名">
									</div>
								</div>
							</div>
						</div>
						<!--审核方式-->
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">审核方式：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right">
						  			<div class="re_xia1">
						  				 <div class="radio radio1 radio-danger">
		                                <input type="radio" name="exam_type" id="exam_type_1" value="1" checked>
		                                <label for="exam_type_1">平台审核 </label>

		                            </div>
		                            <div class="radio  radio1 radio-danger">
		                                <input type="radio" name="exam_type" id="exam_type_2" value="2">
		                                <label for="exam_type_2">我来审核</label>


		                            </div>
						  			   
						  			 </div>


						  		</div>
						  	</div>
						</div>
						<!--上传文档-->
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left">上传文档：</div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right">
						  			<div class="re_xia">
						  			  <div class="uploader white">
											<input type="text" id="shangchuan" class="filename" readonly/>
											<input type="button" name="file" class="button" value="上传"/>
											<input type="file" name="demand_path" size="30"/>
										</div>

						  			 </div>


						  		</div>
						  	</div>
						</div>
						<div class="row bottom_j">
						 	<div class="col-md-3">
						 		<div class="re_left"></div>
						 	</div>
						  	<div class="col-md-8">
						  		<div class="re_right" style="width: 466px;">
						  		    <textarea class="form-control" name="demand" id="miaosu" rows="5" placeholder="文档描述"></textarea>
						  		</div>
						  	</div>
						</div>
						<div class="row bottom_j">
						 	<div class="col-md-10">
						 		<input type="submit" class="fabu" value="发布需求">
						 	</div>

						</div>

					<!--结束-->
					</form>
				</div>

			</div>
		</div>
		<!--footer-->
		{include file="public/footer1" /}	
			<!--右侧导航栏-->
		{include file="public/footer2" /}
		{include file="public/js" /}
		{include file="public/js_1" /}
		<script type="text/javascript" src="__RESOURCES__js/select2.min.js" ></script>
		<!--<script type="text/javascript" src="__RESOURCES__js/City_data.js" ></script>-->
		<script type="text/javascript" src="{:url('task/getCityDataJs')}" ></script>
		<script type="text/javascript" src="__RESOURCES__js/areadata.js" ></script>
		<!---- ><script type="text/javascript" src="__RESOURCES__js/city-picker.data.js" ></script>
		<!---->
		<script type="text/javascript" src="{:url('task/getCateDataJs')}" ></script><script type="text/javascript" src="__RESOURCES__js/city-picker.js" ></script>
		<script type="text/javascript" src="__RESOURCES__js/main.js" ></script>
		<script type="text/javascript" src="__RESOURCES__js/jquery.validate.min.js" ></script>
		<!--<script type="text/javascript" src="__RESOURCES__js/city-picker.data.js" ></script>-->
		<!--<script type="text/javascript" src="__RESOURCES__js/city-picker.js" ></script>-->
		 <script>
		 	$(function(){
				$("input[type=file]").change(function(){$(this).parents(".uploader").find(".filename").val($(this).val());});
				$("input[type=file]").each(function(){
				if($(this).val()==""){$(this).parents(".uploader").find(".filename").val("No file selected...");}
			});
		});
		
		$(".js-example-basic-multiple").select2();
		$(".js-example-basic-multiple").select2({
			 placeholder: "请选择营销方式",
		});
	    function changeState(el) {
	        if (el.readOnly) el.checked=el.readOnly=false;
	        else if (!el.checked) el.readOnly=el.indeterminate=true;
	    }
		$('#top_category_id').on('change', function(e){
			var _p_id = $(e.target).val();
			$('#category_id option').not(":first").attr('selected',false).hide().filter("[parent=" + _p_id+"]").show();
		});
		$('#form_demand .city_box').on('change', function(e){
			$('#areas').val($(e.target).data('value'));
		});
		$('#form_demand').on('submit', function(e){
			$('#area_list').val($('#form_demand .city_box').data('value'));
			console.log($(e.target).serialize());
			//return false;
		});
		
		$("#form_demand").validate({
			rules: {
				name : {required:true},
				city_box : {required:true},
				budget : {required:true,number:true},
				task_category_id : {min:1},
				'promotion_about[]' : {required:true},
				contact_phone : {required:true},
				contact_name : {required:true,maxlength:5},
				demand : {required:true},
			},
			messages: {
				name:{
					required:"请输入项目名称",
				},
				city_box : {
					required: "请选择营销地区",
				},
				budget : {
					required: "请输入预算",
                    number:"请输入正确的数字格式"
				},
				task_category_id : {
					min: "请选择项目分类",
				},
				'promotion_about[]' : {
					required: "请选择营销方式",
				},
				'contact_phone' : {
					required: "请输入电话号码",
				},
				'contact_name' : {
					required: "请输入姓名",
                    maxlength:"长度不能超过5个字"
				},
				'demand' :{
					required : '请输入文档描述',
				}
			}
			
	   });
	</script>
	</body>

</html>
